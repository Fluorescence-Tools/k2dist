build debian:
  stage: build
  tags:
    - linux
  image: continuumio/miniconda3:latest
  before_script:
    # See: https://github.com/conda-forge/pygridgen-feedstock/issues/10
    - apt update
    - apt install libgl1-mesa-glx
    - export PIP_CACHE_DIR="/opt/cache/pip"
    - conda update -n base -c defaults conda
    - conda install mamba -n base -c conda-forge
    - mamba env create -f environment.yml
    - source activate k2dist
  script:
    - echo "I am a build stage job for debian, running on docker using continuumio/miniconda3:latest image"
    - python setup.py install
    - k2dist
